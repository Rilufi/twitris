name: tetrier


on:
  workflow_run:
    workflows: ["tweet"]
    types:
      - completed

jobs:

    build:

        runs-on: ubuntu-latest


        steps:

            - uses: actions/checkout@v2
            
            - uses: gautamkrishnar/keepalive-workflow@master

            - name: Make envfile

              uses: SpicyPizza/create-envfile@v1

              with:

                  envkey_TWITTER_CONSUMER_KEY: ${{ secrets.TWITTER_CONSUMER_KEY }}

                  envkey_TWITTER_CONSUMER_SECRET: ${{ secrets.TWITTER_CONSUMER_SECRET }}

                  envkey_TWITTER_ACCESS_TOKEN_KEY: ${{ secrets.TWITTER_ACCESS_TOKEN_KEY }}

                  envkey_TWITTER_ACCESS_TOKEN_SECRET: ${{ secrets.TWITTER_ACCESS_TOKEN_SECRET }}

                  envkey_CONSUMER_KEY_XAME: ${{ secrets.CONSUMER_KEY_XAME }}

                  envkey_CONSUMER_SECRET_XAME: ${{ secrets.CONSUMER_SECRET_XAME }}

                  envkey_ACCESS_TOKEN_XAME: ${{ secrets.ACCESS_TOKEN_XAME }}

                  envkey_ACCESS_TOKEN_SECRET_XAME: ${{ secrets.ACCESS_TOKEN_SECRET_XAME }}

                  envkey_CONSUMER_KEY_COR: ${{ secrets.CONSUMER_KEY_COR }}

                  envkey_CONSUMER_SECRET_COR: ${{ secrets.CONSUMER_SECRET_COR }}

                  envkey_ACCESS_TOKEN_COR: ${{ secrets.ACCESS_TOKEN_COR }}

                  envkey_ACCESS_TOKEN_SECRET_COR: ${{ secrets.ACCESS_TOKEN_SECRET_COR }}

                  envkey_CONSUMER_KEY_GATO: ${{ secrets.CONSUMER_KEY_GATO }}

                  envkey_CONSUMER_SECRET_GATO: ${{ secrets.CONSUMER_SECRET_GATO }}

                  envkey_ACCESS_TOKEN_GATO: ${{ secrets.ACCESS_TOKEN_GATO }}

                  envkey_ACCESS_TOKEN_SECRET_GATO: ${{ secrets.ACCESS_TOKEN_SECRET_GATO }}

                  envkey_CONSUMER_KEY_NASO: ${{ secrets.CONSUMER_KEY_NASO }}

                  envkey_CONSUMER_SECRET_NASO: ${{ secrets.CONSUMER_SECRET_NASO }}

                  envkey_ACCESS_TOKEN_NASO: ${{ secrets.ACCESS_TOKEN_NASO }}

                  envkey_ACCESS_TOKEN_SECRET_NASO: ${{ secrets.ACCESS_TOKEN_SECRET_NASO }}

                  envkey_CONSUMER_KEY_MEVU: ${{ secrets.CONSUMER_KEY_MEVU }}

                  envkey_CONSUMER_SECRET_MEVU: ${{ secrets.CONSUMER_SECRET_MEVU }}

                  envkey_ACCESS_TOKEN_MEVU: ${{ secrets.ACCESS_TOKEN_MEVU }}

                  envkey_ACCESS_TOKEN_SECRET_MEVU: ${{ secrets.ACCESS_TOKEN_SECRET_MEVU }}

                  envkey_CONSUMER_KEY_UVA: ${{ secrets.CONSUMER_KEY_UVA }}

                  envkey_CONSUMER_SECRET_UVA: ${{ secrets.CONSUMER_SECRET_UVA }}

                  envkey_ACCESS_TOKEN_UVA: ${{ secrets.ACCESS_TOKEN_UVA }}

                  envkey_ACCESS_TOKEN_SECRET_UVA: ${{ secrets.ACCESS_TOKEN_SECRET_UVA }}


                  file_name: .env



            - name: Build the docker container
              run: docker build .


            - name: Run the script ðŸš€
              run: docker-compose -f docker-compose-twitris.yml up
